
# Fitness Telegram Bot

Telegram-бот для тренировок и фитнеса с микросервисной архитектурой.

## Структура проекта

```
/
├── gateway/               # API gateway
├── bot_service/           # Telegram Bot сервис
├── workout_service/       # Сервис тренировок
├── payment_service/       # Платежный сервис
├── openai_service/        # Интеграция с OpenAI
├── user_service/          # Сервис пользователей (хранит: telegram_id, пол, дату рождения, тип подписки, текущий вариант программы тренировок, цель тренировок, место занятий)
├── media_storage/         # Хранилище медиа-файлов
│   ├── exercises.db       # База данных упражнений
│   ├── mediaMan/          # Медиа-файлы упражнений для мужчин
│   └── mediaWomen/        # Медиа-файлы упражнений для женщин
├── shared/                # Общие компоненты и утилиты
└── .env                   # Переменные окружения
```

## Стандарты разработки Telegram-бота

### Общие принципы

* Используется `aiogram v3`, `Router`, `Pydantic`, `asyncio`.
* Модульная структура с разделением логики, клавиатур, состояний, моделей и утилит.
* Обмен данными с микросервисами — строго через `Pydantic` модели (DTO).
* Все конфигурации — через `.env`.

### Структура `bot_service`

```
bot_service/
├── main.py                  # Точка входа
├── handlers/                # Разделы бота, каждый с отдельным Router
├── keyboards/               # Inline и reply-клавиатуры
├── states/                  # FSM-состояния
├── utils/                   # API-клиенты, утилиты
├── models/                  # Pydantic-модели (DTO)
├── .env
```

### Стандарты кода

* Один модуль `handlers/*.py` = один логический раздел (Router).
* Все Router'ы подключаются в `main.py`.
* FSM-состояния оформляются через `states/*.py`.
* Клавиатуры выносятся в `keyboards/*.py`.
* Все вызовы к микросервисам — через `utils/api.py`.
* Все данные валидируются и описываются Pydantic-моделями в `models/`.
* Обмен между сервисами — строго типизированный через DTO.

### Связанные сервисы

* `user_service/` — хранение пользовательских данных (`telegram_id`, пол, дата рождения, тип подписки, цель, место занятий, программа).
* `media_storage/` — хранение медиа-файлов и база `exercises.db` с упражнениями.

### Обмен данными между сервисами

* Вся сериализация/десериализация данных — через `Pydantic`.
* Модели делятся по типу сервиса: `user.py`, `workout.py`, `payment.py` и т.д.
* Не допускается использование "сырых" словарей.

---

## Стиль документирования кода

Все функции и классы должны сопровождаться подробными docstring-комментариями в стиле Google (Google Python Style Guide), но на русском языке. Пример оформления можно найти в файле `example_google (1).py`.

**Пример:**

```python
"""
def add_user(telegram_id, gender, birth_date, subscription_type, current_workout_program, training_goal, training_place):
    """Добавляет нового пользователя в базу данных.

    Args:
        telegram_id (int): Telegram ID пользователя (уникальный идентификатор).
        gender (str): Пол пользователя ('male' или 'female').
        birth_date (str): Дата рождения пользователя в формате 'YYYY-MM-DD'.
        subscription_type (str): Тип подписки пользователя.
        current_workout_program (str): Текущий вариант программы тренировок.
        training_goal (str): Цель тренировок пользователя.
        training_place (str): Место занятий (дом, улица, тренажерный зал).

    Returns:
        str: Сообщение об успешном добавлении или ошибке.
    """
"""
```
